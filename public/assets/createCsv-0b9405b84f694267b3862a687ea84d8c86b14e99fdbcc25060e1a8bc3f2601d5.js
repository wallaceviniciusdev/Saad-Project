$(document).ready(function(){function e(e,t){console.log(e),console.log(t);var n=e.find("tr:has(td)");console.log(n);var i=String.fromCharCode(11),o=String.fromCharCode(0),r=",",c="\r\n",s=n.map(function(e,t){var n=$(t),o=n.find("td");return o.map(function(e,t){var n=$(t),i='"'+n.text().replace(/(\r\n|\n|\r)/gm,"").trim()+'"';return i}).get().join(i)}).get().join(o).split(o).join(c).split(i).join(r);console.log(s);var a=e.find("tr:has(td)"),u=String.fromCharCode(11),l=String.fromCharCode(0),d=",",p="\r\n",s=a.map(function(e,t){var n=$(t),i=n.find("td");return i.map(function(e,t){var n=$(t),i='"'+n.text().replace(/(\r\n|\n|\r)/gm,"").trim()+'"';return i}).get().join(u)}).get().join(l).split(l).join(p).split(u).join(d),_="data:application/csv;charset=utf-8,"+encodeURIComponent(s);$(this).attr({download:t,href:_,target:"_blank"})}$("#export").on("click",function(){e.apply(this,[$("#dados"),"export.csv"])})}),jQuery.fn.table2CSV=function(e){function t(t){var n=t.join("");if(t.length>0&&""!=n){var i=t.join(e.separator);o[o.length]=i}}function n(e){var t=new RegExp(/["]/g),n=e.replace(t,"\xe2\u20ac\u0153"),t=new RegExp(/\<[^\<]+\>/g),n=n.replace(t,"");return""==n?"":'"'+n+'"'}function i(e){var t=window.open("","csv","height=400,width=600");return t.document.write("<html><head><title>CSV</title>"),t.document.write("</head><body >"),t.document.write('<textArea cols=70 rows=15 wrap="off" >'),t.document.write(e),t.document.write("</textArea>"),t.document.write("</body></html>"),t.document.close(),!0}var e=jQuery.extend({separator:",",header:[],delivery:"popup"},e),o=[],r=this,c=e.header.length,s=[];if(c>0)for(var a=0;a<c;a++)s[s.length]=n(e.header[a]);else $(r).filter(":visible").find("th").each(function(){"none"!=$(this).css("display")&&(s[s.length]=n($(this).html()))});if(t(s),$(r).find("tr").each(function(){var e=[];$(this).filter(":visible").find("td").each(function(){"none"!=$(this).css("display")&&(e[e.length]=n($(this).html()))}),t(e)}),"popup"==e.delivery){var u=o.join("\n");return i(u)}var u=o.join("\n");return u};
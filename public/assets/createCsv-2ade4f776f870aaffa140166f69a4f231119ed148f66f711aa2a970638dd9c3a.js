$(document).ready(function(){function t(t,e){console.log(t),console.log(e);var n=t.find("tr:has(td)");console.log(n);var r=String.fromCharCode(11),o=String.fromCharCode(0),i=",",a="\r\n",c=n.map(function(t,e){var n=$(e),o=n.find("td");return o.map(function(t,e){var n=$(e),r='"'+n.text().replace(/(\r\n|\n|\r)/gm,"").trim()+'"';return r}).get().join(r)}).get().join(o).split(o).join(a).split(r).join(i);console.log(c);var d=t.find("tr:has(td)"),l=String.fromCharCode(11),h=String.fromCharCode(0),s=",",f="\r\n",c=d.map(function(t,e){var n=$(e),r=n.find("td");return r.map(function(t,e){var n=$(e),r='"'+n.text().replace(/(\r\n|\n|\r)/gm,"").trim()+'"';return r}).get().join(l)}).get().join(h).split(h).join(f).split(l).join(s),u="data:application/csv;charset=utf-8,"+encodeURIComponent(c);$(this).attr({download:e,href:u,target:"_blank"})}$("#export").on("click",function(){t.apply(this,[$("#dados"),"export.csv"])})}),jQuery.fn.table2CSV=function(t){function e(e){var n=e.join("");if(e.length>0&&""!=n){var r=e.join(t.separator);o[o.length]=r}}function n(t){var e=new RegExp(/["]/g),n=t.replace(e,"\xe2\u20ac\u0153"),e=new RegExp(/\<[^\<]+\>/g),n=n.replace(e,"");return""==n?"":'"'+n+'"'}function r(t){var e=window.open("","csv","height=400,width=600");return e.document.write("<html><head><title>CSV</title>"),e.document.write("</head><body >"),e.document.write('<textArea cols=70 rows=15 wrap="off" >'),e.document.write(t),e.document.write("</textArea>"),e.document.write("</body></html>"),e.document.close(),!0}var t=jQuery.extend({separator:",",header:[],delivery:"popup"},t),o=[],i=this,a=t.header.length,c=[];if(a>0)for(var d=0;d<a;d++)c[c.length]=n(t.header[d]);else $(i).filter(":visible").find("th").each(function(){"none"!=$(this).css("display")&&(c[c.length]=n($(this).html()))});if(e(c),$(i).find("tr").each(function(){var t=[];$(this).filter(":visible").find("td").each(function(){"none"!=$(this).css("display")&&(t[t.length]=n($(this).html()))}),e(t)}),"popup"==t.delivery){var l=o.join("\n");return r(l)}var l=o.join("\n");return l};
!function(t){t.gritter={},t.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},t.gritter.add=function(t){try{return e.add(t||{})}catch(e){var n="Gritter Error: "+e;"undefined"!=typeof console&&console.error?console.error(n,t):alert(n)}},t.gritter.remove=function(t,n){e.removeSpecific(t,n||{})},t.gritter.removeAll=function(t){e.stop(t||{})};var e={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<div class="gritter-close"></div>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(n){if("string"==typeof n&&(n={text:n}),!n.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var i=n.title,r=n.text,o=n.image||"",a=n.sticky||!1,s=n.class_name||t.gritter.options.class_name,l=t.gritter.options.position,c=n.time||"";this._verifyWrapper(),this._item_count++;var u=this._item_count,h=this._tpl_item;t(["before_open","after_open","before_close","after_close"]).each(function(i,r){e["_"+r+"_"+u]=t.isFunction(n[r])?n[r]:function(){}}),this._custom_timer=0,c&&(this._custom_timer=c);var f=""!=o?'<img src="'+o+'" class="gritter-image" />':"",d=""!=o?"gritter-with-image":"gritter-without-image";if(i=i?this._str_replace("[[title]]",i,this._tpl_title):"",h=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[i,r,this._tpl_close,f,this._item_count,d,s],h),this["_before_open_"+u]()===!1)return!1;t("#gritter-notice-wrapper").addClass(l).append(h);var p=t("#gritter-item-"+this._item_count);return p.fadeIn(this.fade_in_speed,function(){e["_after_open_"+u](t(this))}),a||this._setFadeTimer(p,u),t(p).bind("mouseenter mouseleave",function(n){"mouseenter"==n.type?a||e._restoreItemIfFading(t(this),u):a||e._setFadeTimer(t(this),u),e._hoverState(t(this),n.type)}),t(p).find(".gritter-close").click(function(){e.removeSpecific(u,{},null,!0)}),u},_countRemoveWrapper:function(e,n,i){n.remove(),this["_after_close_"+e](n,i),0==t(".gritter-item-wrapper").length&&t("#gritter-notice-wrapper").remove()},_fade:function(t,n,i,r){var i=i||{},o="undefined"==typeof i.fade||i.fade,a=i.speed||this.fade_out_speed,s=r;this["_before_close_"+n](t,s),r&&t.unbind("mouseenter mouseleave"),o?t.animate({opacity:0},a,function(){t.animate({height:0},300,function(){e._countRemoveWrapper(n,t,s)})}):this._countRemoveWrapper(n,t)},_hoverState:function(t,e){"mouseenter"==e?(t.addClass("hover"),t.find(".gritter-close").show()):(t.removeClass("hover"),t.find(".gritter-close").hide())},removeSpecific:function(e,n,i,r){if(!i)var i=t("#gritter-item-"+e);this._fade(i,e,n||{},r)},_restoreItemIfFading:function(t,e){clearTimeout(this["_int_id_"+e]),t.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in t.gritter.options)this[opt]=t.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(t,n){var i=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+n]=setTimeout(function(){e._fade(t,n)},i)},stop:function(e){var n=t.isFunction(e.before_close)?e.before_close:function(){},i=t.isFunction(e.after_close)?e.after_close:function(){},r=t("#gritter-notice-wrapper");n(r),r.fadeOut(function(){t(this).remove(),i()})},_str_replace:function(t,e,n,i){var r=0,o=0,a="",s="",l=0,c=0,u=[].concat(t),h=[].concat(e),f=n,d=h instanceof Array,p=f instanceof Array;for(f=[].concat(f),i&&(this.window[i]=0),r=0,l=f.length;r<l;r++)if(""!==f[r])for(o=0,c=u.length;o<c;o++)a=f[r]+"",s=d?void 0!==h[o]?h[o]:"":h[0],f[r]=a.split(u[o]).join(s),i&&f[r]!==a&&(this.window[i]+=(a.length-f[r].length)/u[o].length);return p?f:f[0]},_verifyWrapper:function(){0==t("#gritter-notice-wrapper").length&&t("body").append(this._tpl_wrap)}}}(jQuery);